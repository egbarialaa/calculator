
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>حاسبة + تحويل عملات</title>
<style>
  body{display:flex;justify-content:center;align-items:center;height:100vh;background:#111;font-family:Arial}
  .calc{background:#000;padding:18px;border-radius:12px;width:320px}
  #screen{width:100%;height:52px;font-size:22px;text-align:right;margin-bottom:10px}
  .top{display:flex;gap:8px;margin-bottom:10px}
  .mode{flex:1;height:36px;background:#444;color:#fff;border:none;cursor:pointer;border-radius:8px}
  .fxbar{display:none; gap:8px; margin-bottom:10px; align-items:center}
  select{flex:1;height:36px;border-radius:8px;border:1px solid #333;background:#111;color:#fff;padding:0 8px}
  .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
  button{height:46px;font-size:18px;cursor:pointer;border-radius:8px}
  .clear{background:#c00;color:#fff;border:none}
  .equal{grid-column:span 2}
</style>
</head>
<body>

<div class="calc">
  <input id="screen" readonly />

  <div class="top">
    <button class="mode" onclick="toggleMode()">MODE: حساب عادي</button>
  </div>

  <div class="fxbar" id="fxbar">
    <select id="from"></select>
    <select id="to"></select>
  </div>

  <div class="keys">
    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button onclick="addDiv()">÷</button>

    <button onclick="add('4')">4</button>
    <button onclick="add('5')">5</button>
    <button onclick="add('6')">6</button>
    <button onclick="add('*')">×</button>

    <button onclick="add('1')">1</button>
    <button onclick="add('2')">2</button>
    <button onclick="add('3')">3</button>
    <button onclick="add('-')">−</button>

    <button onclick="add('0')">0</button>
    <button class="clear" onclick="clr()">C</button>
    <button class="equal" onclick="doEqual()">=</button>
    <button onclick="add('+')">+</button>
  </div>
</div>

<script>
  const s = document.getElementById('screen');
  const fxbar = document.getElementById('fxbar');
  const fromSel = document.getElementById('from');
  const toSel = document.getElementById('to');
  const modeBtn = document.querySelector('.mode');

  let mode = "calc"; // calc | fx

  // ✅ أسعار ثابتة: قيمة 1 وحدة من العملة مقابل الدولار (USD)
  // غيّرها براحتك
  const ratesToUSD = {
    USD: 1,
    ILS: 1/3.70,   // 1 شيكل = 0.270... دولار (تقريبي)
    EUR: 1.09,
    GBP: 1.27,
    JOD: 1.41,
    SAR: 1/3.75,
    AED: 1/3.6725,
    EGP: 1/48.0
  };

  const labels = {
    USD: "دولار $ (USD)",
    ILS: "شيكل ₪ (ILS)",
    EUR: "يورو € (EUR)",
    GBP: "جنيه £ (GBP)",
    JOD: "دينار أردني (JOD)",
    SAR: "ريال سعودي (SAR)",
    AED: "درهم إماراتي (AED)",
    EGP: "جنيه مصري (EGP)"
  };

  // تعبئة القوائم
  function fillSelects(){
    const codes = Object.keys(ratesToUSD);
    fromSel.innerHTML = "";
    toSel.innerHTML = "";
    for(const c of codes){
      const o1 = document.createElement("option");
      o1.value = c; o1.textContent = labels[c] || c;
      const o2 = document.createElement("option");
      o2.value = c; o2.textContent = labels[c] || c;
      fromSel.appendChild(o1);
      toSel.appendChild(o2);
    }
    // افتراضي: من شيكل إلى دولار
    fromSel.value = "ILS";
    toSel.value = "USD";
  }
  fillSelects();

  function toggleMode(){
    if(mode === "calc"){
      mode = "fx";
      modeBtn.textContent = "MODE: تحويل عملات";
      fxbar.style.display = "flex";
      s.value = "";
    } else {
      mode = "calc";
      modeBtn.textContent = "MODE: حساب عادي";
      fxbar.style.display = "none";
      s.value = "";
    }
  }

  function add(v){ s.value += v; }
  function addDiv(){ s.value += '/'; } // داخلياً / للحساب
  function clr(){ s.value = ''; }

  function doEqual(){
    if(mode === "calc"){
      try{
        s.value = eval(s.value);
      }catch(e){
        s.value = "خطأ";
      }
    } else {
      convert();
    }
  }

  // تحويل: amount * (fromToUSD) / (toToUSD)
  function convert(){
    const amount = parseFloat(s.value);
    if(isNaN(amount)){ s.value = "اكتب رقم"; return; }

    const from = fromSel.value;
    const to = toSel.value;

    const fromToUSD = ratesToUSD[from];
    const toToUSD = ratesToUSD[to];

    const result = (amount * fromToUSD) / toToUSD;

    s.value = `${amount} ${from} = ${result.toFixed(2)} ${to}`;
  }
</script>

</body>
</html>

